{"ast":null,"code":"import _regeneratorRuntime from\"/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{makeStyles,Typography,TextField,Button,Box,Snackbar}from\"@material-ui/core\";import MuiAlert from\"@material-ui/lab/Alert\";import{LOGIN_MUT}from\"../gql\";import{useMutation,useApolloClient}from\"@apollo/react-hooks\";var useStyles=makeStyles({mainContainer:{display:\"block\",margin:\"10% auto 0 auto\",borderRadius:\"5px\",maxWidth:\"500px\"},formInput:{margin:\"10px 0\"},pageHeading:{textTransform:\"uppercase\"}});function Alert(props){return React.createElement(MuiAlert,Object.assign({elevation:6,variant:\"filled\"},props));}export var Login=function Login(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useMutation=useMutation(LOGIN_MUT),_useMutation2=_slicedToArray(_useMutation,2),tokenAuth=_useMutation2[0],error=_useMutation2[1].error;var client=useApolloClient();var formSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,username,password){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return tokenAuth({variables:{username:username,password:password}});case 3:res=_context.sent;localStorage.setItem(\"authToken\",res.data.tokenAuth.token);client.writeData({data:{isLoggedIn:true}});case 6:case\"end\":return _context.stop();}}},_callee);}));return function formSubmit(_x,_x2,_x3){return _ref.apply(this,arguments);};}();return React.createElement(Box,{className:classes.mainContainer,boxShadow:3,p:5},React.createElement(Typography,{className:classes.pageHeading,variant:\"h2\",align:\"center\"},\"Login\"),error&&React.createElement(Snackbar,{open:true},React.createElement(Alert,{severity:\"error\"},error.message)),React.createElement(Box,{component:\"form\",className:classes.form,onSubmit:function onSubmit(e){return formSubmit(e,username,password);}},React.createElement(TextField,{label:\"Username\",placeholder:\"Username\",className:classes.formInput,variant:\"outlined\",fullWidth:true,required:true,onChange:function onChange(e){return setUsername(e.target.value);},value:username}),React.createElement(TextField,{label:\"Password\",placeholder:\"Password\",type:\"password\",variant:\"outlined\",className:classes.formInput,required:true,fullWidth:true,onChange:function onChange(e){return setPassword(e.target.value);},value:password}),React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",size:\"large\",className:classes.formInput,fullWidth:true,disabled:!username.trim()||!password.trim()},\"Submit\")));};","map":{"version":3,"sources":["/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/src/pages/Login.js"],"names":["React","useState","makeStyles","Typography","TextField","Button","Box","Snackbar","MuiAlert","LOGIN_MUT","useMutation","useApolloClient","useStyles","mainContainer","display","margin","borderRadius","maxWidth","formInput","pageHeading","textTransform","Alert","props","Login","classes","username","setUsername","password","setPassword","tokenAuth","error","client","formSubmit","e","preventDefault","variables","res","localStorage","setItem","data","token","writeData","isLoggedIn","message","form","target","value","trim"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n\nimport {\n  makeStyles,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  Snackbar\n} from \"@material-ui/core\";\n\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\nimport { LOGIN_MUT } from \"../gql\";\nimport { useMutation, useApolloClient } from \"@apollo/react-hooks\";\n\nconst useStyles = makeStyles({\n  mainContainer: {\n    display: \"block\",\n    margin: \"10% auto 0 auto\",\n    borderRadius: \"5px\",\n    maxWidth: \"500px\"\n  },\n  formInput: {\n    margin: \"10px 0\"\n  },\n  pageHeading: {\n    textTransform: \"uppercase\"\n  }\n});\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport const Login = () => {\n  const classes = useStyles();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const [tokenAuth, { error }] = useMutation(LOGIN_MUT);\n  const client = useApolloClient();\n\n  const formSubmit = async (e, username, password) => {\n    e.preventDefault();\n    const res = await tokenAuth({\n      variables: { username: username, password: password }\n    });\n    localStorage.setItem(\"authToken\", res.data.tokenAuth.token);\n    client.writeData({ data: { isLoggedIn: true } });\n  };\n\n  return (\n    <Box className={classes.mainContainer} boxShadow={3} p={5}>\n      <Typography className={classes.pageHeading} variant=\"h2\" align=\"center\">\n        Login\n      </Typography>\n      {error && (\n        <Snackbar open={true}>\n          <Alert severity=\"error\">{error.message}</Alert>\n        </Snackbar>\n      )}\n      <Box\n        component=\"form\"\n        className={classes.form}\n        onSubmit={e => formSubmit(e, username, password)}\n      >\n        <TextField\n          label=\"Username\"\n          placeholder=\"Username\"\n          className={classes.formInput}\n          variant=\"outlined\"\n          fullWidth\n          required\n          onChange={e => setUsername(e.target.value)}\n          value={username}\n        />\n\n        <TextField\n          label=\"Password\"\n          placeholder=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          className={classes.formInput}\n          required\n          fullWidth\n          onChange={e => setPassword(e.target.value)}\n          value={password}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          className={classes.formInput}\n          fullWidth\n          disabled={!username.trim() || !password.trim()}\n        >\n          Submit\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}