{"ast":null,"code":"import _slicedToArray from\"/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{InputWrapper,FlexWrapper}from\"../../styled/containers\";import{Input,Label,Select,Required}from\"../../styled/forms\";import{Button,ClickAwayListener}from\"@material-ui/core\";import{useMutation}from\"@apollo/react-hooks\";import{UPDATE_DRIVE,DELETE_DRIVE,RELEASE_DRIVE,HOME_PAGE_QUERY,ALL_DRIVES_QUERY}from\"../../gql\";export var EditDriveForm=function EditDriveForm(_ref){var toggle=_ref.toggle,driveId=_ref.driveId,drive=_ref.drive;var _useMutation=useMutation(UPDATE_DRIVE),_useMutation2=_slicedToArray(_useMutation,2),updateDrive=_useMutation2[0],updateError=_useMutation2[1].error;var _useMutation3=useMutation(DELETE_DRIVE),_useMutation4=_slicedToArray(_useMutation3,2),deleteDrive=_useMutation4[0],deleteError=_useMutation4[1].error;var _useMutation5=useMutation(RELEASE_DRIVE),_useMutation6=_slicedToArray(_useMutation5,2),releaseDrive=_useMutation6[0],releaseError=_useMutation6[1].error;var _useState=useState(\"\".concat(drive.driveNumber)),_useState2=_slicedToArray(_useState,2),driveNumber=_useState2[0],setDriveNumber=_useState2[1];var _useState3=useState(drive.driveCapacityGb),_useState4=_slicedToArray(_useState3,2),driveCapacityGb=_useState4[0],setDriveCapacityGb=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),releaseActive=_useState6[0],setReleaseActive=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),deleteActive=_useState8[0],setDeleteActive=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();updateDrive({variables:{id:driveId,driveNumber:driveNumber,driveCapacityGb:driveCapacityGb},onCompleted:editDriveCompleted()});};var handleDelete=function handleDelete(e){e.preventDefault();deleteDrive({variables:{driveId:driveId},refetchQueries:[{query:ALL_DRIVES_QUERY},{query:HOME_PAGE_QUERY}],onCompleted:deleteDriveCompleted()});};var handleRelease=function handleRelease(e){e.preventDefault();console.log(\"Release Drive: \".concat(driveId));releaseDrive({variables:{driveId:driveId},refetchQueries:[{query:ALL_DRIVES_QUERY},{query:HOME_PAGE_QUERY}],onCompleted:releaseDriveCompleted()});};var editDriveCompleted=function editDriveCompleted(){toggle();};var deleteDriveCompleted=function deleteDriveCompleted(){toggle();};var releaseDriveCompleted=function releaseDriveCompleted(){toggle();};return React.createElement(React.Fragment,null,React.createElement(FlexWrapper,{as:\"form\",minWidth:\"350px\",maxWidth:\"350px\",justifyContent:\"space-evenly\",margin:\"0 0 0 0 \",padding:\"30px 20px 20px 30px\",rowGap:\"30px\",onSubmit:function onSubmit(e){return handleSubmit(e);}},React.createElement(InputWrapper,{gridColumn:\"4/6\",maxWidth:\"100px\"},React.createElement(Label,null,\"Number \",React.createElement(Required,null,\"*\")),React.createElement(Input,{placeholder:\"1\",value:driveNumber,onChange:function onChange(e){return setDriveNumber(e.target.value);}})),React.createElement(InputWrapper,{gridColumn:\"6/8\",maxWidth:\"100px\"},React.createElement(Label,null,\"Capacity \",React.createElement(Required,null,\"*\")),React.createElement(Select,{defaultValue:driveCapacityGb,padding:\"16px 18px\",onChange:function onChange(e){return setDriveCapacityGb(e.target.value);}},React.createElement(\"option\",{value:\"250GB\"},\"250GB\"),React.createElement(\"option\",{value:\"500GB\"},\"500GB\"),React.createElement(\"option\",{value:\"1TB\"},\"1TB\"),React.createElement(\"option\",{value:\"2TB\"},\"2TB\"))),React.createElement(InputWrapper,{gridColumn:\"4 / 10\",width:\"100%\"},React.createElement(Button,{type:\"submit\",size:\"large\",fullWidth:true,variant:\"contained\",color:\"primary\",disabled:!driveNumber.trim()||!driveCapacityGb||releaseActive||deleteActive},\"Edit Drive \".concat(drive.driveNumber))),deleteActive?React.createElement(ClickAwayListener,{onClickAway:function onClickAway(){return setDeleteActive(false);}},React.createElement(Button,{color:\"primary\",variant:\"contained\",onClick:function onClick(e){return handleDelete(e);}},\"Delete Drive\")):React.createElement(Button,{color:\"primary\",disabled:releaseActive,variant:\"outlined\",onClick:function onClick(e){return setDeleteActive(true);}},\"Delete Drive\"),drive.rentalProjects.length>0&&React.createElement(ReleaseDriveButtons,{releaseActive:releaseActive,setReleaseActive:setReleaseActive,deleteActive:deleteActive,handleRelease:handleRelease})));};var ReleaseDriveButtons=function ReleaseDriveButtons(_ref2){var releaseActive=_ref2.releaseActive,setReleaseActive=_ref2.setReleaseActive,deleteActive=_ref2.deleteActive,handleRelease=_ref2.handleRelease;return releaseActive?React.createElement(ClickAwayListener,{onClickAway:function onClickAway(){return setReleaseActive(false);}},React.createElement(Button,{color:\"primary\",variant:\"contained\",onClick:function onClick(e){return handleRelease(e);}},\"Release Drive\")):React.createElement(Button,{color:\"primary\",variant:\"outlined\",disabled:deleteActive,onClick:function onClick(e){return setReleaseActive(true);}},\"Release Drive\");};","map":{"version":3,"sources":["/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/src/components/Drives/EditDriveForm.js"],"names":["React","useState","InputWrapper","FlexWrapper","Input","Label","Select","Required","Button","ClickAwayListener","useMutation","UPDATE_DRIVE","DELETE_DRIVE","RELEASE_DRIVE","HOME_PAGE_QUERY","ALL_DRIVES_QUERY","EditDriveForm","toggle","driveId","drive","updateDrive","updateError","error","deleteDrive","deleteError","releaseDrive","releaseError","driveNumber","setDriveNumber","driveCapacityGb","setDriveCapacityGb","releaseActive","setReleaseActive","deleteActive","setDeleteActive","handleSubmit","e","preventDefault","variables","id","onCompleted","editDriveCompleted","handleDelete","refetchQueries","query","deleteDriveCompleted","handleRelease","console","log","releaseDriveCompleted","target","value","trim","rentalProjects","length","ReleaseDriveButtons"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { InputWrapper, FlexWrapper } from \"../../styled/containers\";\nimport { Input, Label, Select, Required } from \"../../styled/forms\";\n\nimport { Button, ClickAwayListener } from \"@material-ui/core\";\n\nimport { useMutation } from \"@apollo/react-hooks\";\nimport {\n  UPDATE_DRIVE,\n  DELETE_DRIVE,\n  RELEASE_DRIVE,\n  HOME_PAGE_QUERY,\n  ALL_DRIVES_QUERY\n} from \"../../gql\";\n\nexport const EditDriveForm = ({ toggle, driveId, drive }) => {\n  const [updateDrive, { error: updateError }] = useMutation(UPDATE_DRIVE);\n  const [deleteDrive, { error: deleteError }] = useMutation(DELETE_DRIVE);\n  const [releaseDrive, { error: releaseError }] = useMutation(RELEASE_DRIVE);\n\n  const [driveNumber, setDriveNumber] = useState(`${drive.driveNumber}`);\n  const [driveCapacityGb, setDriveCapacityGb] = useState(drive.driveCapacityGb);\n  const [releaseActive, setReleaseActive] = useState(false);\n  const [deleteActive, setDeleteActive] = useState(false);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    updateDrive({\n      variables: {\n        id: driveId,\n        driveNumber,\n        driveCapacityGb\n      },\n      onCompleted: editDriveCompleted()\n    });\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    deleteDrive({\n      variables: { driveId },\n      refetchQueries: [{ query: ALL_DRIVES_QUERY }, { query: HOME_PAGE_QUERY }],\n      onCompleted: deleteDriveCompleted()\n    });\n  };\n\n  const handleRelease = e => {\n    e.preventDefault();\n    console.log(`Release Drive: ${driveId}`);\n    releaseDrive({\n      variables: { driveId },\n      refetchQueries: [{ query: ALL_DRIVES_QUERY }, { query: HOME_PAGE_QUERY }],\n      onCompleted: releaseDriveCompleted()\n    });\n  };\n\n  const editDriveCompleted = () => {\n    toggle();\n  };\n\n  const deleteDriveCompleted = () => {\n    toggle();\n  };\n\n  const releaseDriveCompleted = () => {\n    toggle();\n  };\n\n  return (\n    <>\n      <FlexWrapper\n        as=\"form\"\n        minWidth=\"350px\"\n        maxWidth=\"350px\"\n        justifyContent=\"space-evenly\"\n        margin=\"0 0 0 0 \"\n        padding=\"30px 20px 20px 30px\"\n        rowGap=\"30px\"\n        onSubmit={e => handleSubmit(e)}\n      >\n        <InputWrapper gridColumn=\"4/6\" maxWidth=\"100px\">\n          <Label>\n            Number <Required>*</Required>\n          </Label>\n          <Input\n            placeholder=\"1\"\n            value={driveNumber}\n            onChange={e => setDriveNumber(e.target.value)}\n          />\n        </InputWrapper>\n\n        <InputWrapper gridColumn=\"6/8\" maxWidth=\"100px\">\n          <Label>\n            Capacity <Required>*</Required>\n          </Label>\n          <Select\n            defaultValue={driveCapacityGb}\n            padding=\"16px 18px\"\n            onChange={e => setDriveCapacityGb(e.target.value)}\n          >\n            <option value=\"250GB\">250GB</option>\n            <option value=\"500GB\">500GB</option>\n            <option value=\"1TB\">1TB</option>\n            <option value=\"2TB\">2TB</option>\n          </Select>\n        </InputWrapper>\n\n        <InputWrapper gridColumn=\"4 / 10\" width=\"100%\">\n          <Button\n            type=\"submit\"\n            size=\"large\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={\n              !driveNumber.trim() ||\n              !driveCapacityGb ||\n              releaseActive ||\n              deleteActive\n            }\n          >\n            {`Edit Drive ${drive.driveNumber}`}\n          </Button>\n        </InputWrapper>\n        {deleteActive ? (\n          <ClickAwayListener onClickAway={() => setDeleteActive(false)}>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={e => handleDelete(e)}\n            >\n              Delete Drive\n            </Button>\n          </ClickAwayListener>\n        ) : (\n          <Button\n            color=\"primary\"\n            disabled={releaseActive}\n            variant=\"outlined\"\n            onClick={e => setDeleteActive(true)}\n          >\n            Delete Drive\n          </Button>\n        )}\n        {drive.rentalProjects.length > 0 && (\n          <ReleaseDriveButtons\n            releaseActive={releaseActive}\n            setReleaseActive={setReleaseActive}\n            deleteActive={deleteActive}\n            handleRelease={handleRelease}\n          />\n        )}\n      </FlexWrapper>\n    </>\n  );\n};\n\nconst ReleaseDriveButtons = ({\n  releaseActive,\n  setReleaseActive,\n  deleteActive,\n  handleRelease\n}) =>\n  releaseActive ? (\n    <ClickAwayListener onClickAway={() => setReleaseActive(false)}>\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        onClick={e => handleRelease(e)}\n      >\n        Release Drive\n      </Button>\n    </ClickAwayListener>\n  ) : (\n    <Button\n      color=\"primary\"\n      variant=\"outlined\"\n      disabled={deleteActive}\n      onClick={e => setReleaseActive(true)}\n    >\n      Release Drive\n    </Button>\n  );\n"]},"metadata":{},"sourceType":"module"}