{"ast":null,"code":"var _jsxFileName = \"/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/src/pages/RentalDetailPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect, Link, useLocation } from \"react-router-dom\";\nimport { RentalBasicInfo, RentalClients, RentalNotes, RentalButtons, RentalDates, RentalDrives } from \"../components/RentalProjects/Detail\";\nimport { Error } from \"../components/global\";\nimport { Button } from \"@material-ui/core\";\nimport { MainWrapper, PageHeadingWrapper, GridWrapper, SimpleDiv } from \"../styled/containers\";\nimport { PageHeading, PageSubheading } from \"../styled/typography\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { GET_RENTAL_QUERY, DELETE_RENTAL, HOME_PAGE_QUERY, GET_RENTALS_QUERY } from \"../gql\";\n\nconst RentalDetailPage = props => {\n  const location = useLocation(); // const [rentalId, setRentalId] = useState(\n  //   (props.location.state && props.location.state.rentalId) ||\n  //     window.location.pathname.slice(9)\n  // );\n\n  const [rentalId, setRentalId] = useState(location.pathname.slice(9));\n  const [deleted, setDeleted] = useState(false);\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(GET_RENTAL_QUERY, {\n    variables: {\n      id: rentalId\n    }\n  });\n  const [deleteRentalProject, {\n    error: deleteError\n  }] = useMutation(DELETE_RENTAL);\n\n  const handleDelete = e => {\n    e.preventDefault();\n    deleteRentalProject({\n      variables: {\n        projectId: rentalId\n      },\n      refetchQueries: [{\n        query: HOME_PAGE_QUERY,\n        variables: {\n          limit: 8,\n          reverse: true\n        }\n      }, {\n        query: GET_RENTALS_QUERY\n      }],\n      onCompleted: deleteCompleted()\n    });\n  };\n\n  const deleteCompleted = () => {\n    setDeleted(!deleted);\n  };\n\n  useEffect(() => {\n    if (location.pathname.slice(9) !== rentalId) {\n      setRentalId(location.pathname.slice(9));\n    }\n  });\n  return React.createElement(MainWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, deleted && React.createElement(Redirect, {\n    to: \"/rentals\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), loading && React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Loading\"), error && React.createElement(Error, {\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), data && React.createElement(React.Fragment, null, React.createElement(PageHeadingWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(PageHeading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, data.rentalProject.title), data.rentalProject.season && React.createElement(PageSubheading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Season \", data.rentalProject.season)), React.createElement(GridWrapper, {\n    columns: \"65% 35%\",\n    columnGap: \"30px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(SimpleDiv, {\n    className: \"hacky-width\",\n    minWidth: \"100%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(RentalBasicInfo, {\n    project: data.rentalProject,\n    abbreviation: data.rentalProject.abbreviation,\n    room: data.rentalProject.primaryRoom,\n    config: data.rentalProject.channelConfig,\n    driveUser: data.rentalProject.driveUser,\n    drivePass: data.rentalProject.drivePass,\n    msUser: data.rentalProject.msUser,\n    msPass: data.rentalProject.msPass,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(RentalClients, {\n    clients: data.rentalProject.rentalClients,\n    setRentalId: setRentalId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(RentalNotes, {\n    notes: data.rentalProject.additionalInfo,\n    projectId: data.rentalProject.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(SimpleDiv, {\n    gridColumn: \"2/3\",\n    alignSelf: \"start\",\n    width: \"100%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(RentalButtons, {\n    primaryRoomId: data.rentalProject.primaryRoom && data.rentalProject.primaryRoom.id,\n    projectId: data.rentalProject.id,\n    filesLink: data.rentalProject.filesLink,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(RentalDates, {\n    startDate: data.rentalProject.startDate,\n    mixingCompleteDate: data.rentalProject.mixingCompleteDate,\n    projectCompleteDate: data.rentalProject.projectCompleteDate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), React.createElement(RentalDrives, {\n    totalDrives: data.rentalProject.totalDrives,\n    totalStorage: data.rentalProject.totalStorage,\n    drives: data.rentalProject.rentalDrives,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  })), React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: e => handleDelete(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Delete\"), deleteError && React.createElement(Error, {\n    error: deleteError,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }))));\n};\n\nexport default RentalDetailPage;","map":{"version":3,"sources":["/Users/georgehart/Documents/WebDev/Work/swd_engineering/swd_engineering/frontend/src/pages/RentalDetailPage.js"],"names":["React","useState","useEffect","Redirect","Link","useLocation","RentalBasicInfo","RentalClients","RentalNotes","RentalButtons","RentalDates","RentalDrives","Error","Button","MainWrapper","PageHeadingWrapper","GridWrapper","SimpleDiv","PageHeading","PageSubheading","useQuery","useMutation","GET_RENTAL_QUERY","DELETE_RENTAL","HOME_PAGE_QUERY","GET_RENTALS_QUERY","RentalDetailPage","props","location","rentalId","setRentalId","pathname","slice","deleted","setDeleted","data","loading","error","variables","id","deleteRentalProject","deleteError","handleDelete","e","preventDefault","projectId","refetchQueries","query","limit","reverse","onCompleted","deleteCompleted","rentalProject","title","season","abbreviation","primaryRoom","channelConfig","driveUser","drivePass","msUser","msPass","rentalClients","additionalInfo","filesLink","startDate","mixingCompleteDate","projectCompleteDate","totalDrives","totalStorage","rentalDrives"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Redirect, Link, useLocation } from \"react-router-dom\";\n\nimport {\n  RentalBasicInfo,\n  RentalClients,\n  RentalNotes,\n  RentalButtons,\n  RentalDates,\n  RentalDrives\n} from \"../components/RentalProjects/Detail\";\nimport { Error } from \"../components/global\";\n\nimport { Button } from \"@material-ui/core\";\n\nimport {\n  MainWrapper,\n  PageHeadingWrapper,\n  GridWrapper,\n  SimpleDiv\n} from \"../styled/containers\";\nimport { PageHeading, PageSubheading } from \"../styled/typography\";\n\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport {\n  GET_RENTAL_QUERY,\n  DELETE_RENTAL,\n  HOME_PAGE_QUERY,\n  GET_RENTALS_QUERY\n} from \"../gql\";\n\nconst RentalDetailPage = props => {\n  const location = useLocation();\n  // const [rentalId, setRentalId] = useState(\n  //   (props.location.state && props.location.state.rentalId) ||\n  //     window.location.pathname.slice(9)\n  // );\n  const [rentalId, setRentalId] = useState(location.pathname.slice(9));\n  const [deleted, setDeleted] = useState(false);\n\n  const { data, loading, error } = useQuery(GET_RENTAL_QUERY, {\n    variables: {\n      id: rentalId\n    }\n  });\n\n  const [deleteRentalProject, { error: deleteError }] = useMutation(\n    DELETE_RENTAL\n  );\n\n  const handleDelete = e => {\n    e.preventDefault();\n    deleteRentalProject({\n      variables: { projectId: rentalId },\n      refetchQueries: [\n        { query: HOME_PAGE_QUERY, variables: { limit: 8, reverse: true } },\n        { query: GET_RENTALS_QUERY }\n      ],\n      onCompleted: deleteCompleted()\n    });\n  };\n\n  const deleteCompleted = () => {\n    setDeleted(!deleted);\n  };\n\n  useEffect(() => {\n    if (location.pathname.slice(9) !== rentalId) {\n      setRentalId(location.pathname.slice(9));\n    }\n  });\n\n  return (\n    <MainWrapper>\n      {deleted && <Redirect to=\"/rentals\" />}\n      {loading && <h1>Loading</h1>}\n      {error && <Error error={error} />}\n      {data && (\n        <>\n          <PageHeadingWrapper>\n            <PageHeading>{data.rentalProject.title}</PageHeading>\n            {data.rentalProject.season && (\n              <PageSubheading>\n                Season {data.rentalProject.season}\n              </PageSubheading>\n            )}\n          </PageHeadingWrapper>\n          <GridWrapper columns=\"65% 35%\" columnGap=\"30px\">\n            <SimpleDiv className=\"hacky-width\" minWidth=\"100%\">\n              <RentalBasicInfo\n                project={data.rentalProject}\n                abbreviation={data.rentalProject.abbreviation}\n                room={data.rentalProject.primaryRoom}\n                config={data.rentalProject.channelConfig}\n                driveUser={data.rentalProject.driveUser}\n                drivePass={data.rentalProject.drivePass}\n                msUser={data.rentalProject.msUser}\n                msPass={data.rentalProject.msPass}\n              />\n              <RentalClients\n                clients={data.rentalProject.rentalClients}\n                setRentalId={setRentalId}\n              />\n              <RentalNotes\n                notes={data.rentalProject.additionalInfo}\n                projectId={data.rentalProject.id}\n              />\n            </SimpleDiv>\n            <SimpleDiv gridColumn=\"2/3\" alignSelf=\"start\" width=\"100%\">\n              <RentalButtons\n                primaryRoomId={\n                  data.rentalProject.primaryRoom &&\n                  data.rentalProject.primaryRoom.id\n                }\n                projectId={data.rentalProject.id}\n                filesLink={data.rentalProject.filesLink}\n              />\n              <RentalDates\n                startDate={data.rentalProject.startDate}\n                mixingCompleteDate={data.rentalProject.mixingCompleteDate}\n                projectCompleteDate={data.rentalProject.projectCompleteDate}\n              />\n              <RentalDrives\n                totalDrives={data.rentalProject.totalDrives}\n                totalStorage={data.rentalProject.totalStorage}\n                drives={data.rentalProject.rentalDrives}\n              />\n            </SimpleDiv>\n            <Button\n              color=\"secondary\"\n              variant=\"outlined\"\n              onClick={e => handleDelete(e)}\n            >\n              Delete\n            </Button>\n            {deleteError && <Error error={deleteError} />}\n          </GridWrapper>\n        </>\n      )}\n    </MainWrapper>\n  );\n};\n\nexport default RentalDetailPage;\n"]},"metadata":{},"sourceType":"module"}