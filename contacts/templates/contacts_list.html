{% extends "base.html" %}
{% load static %}

{% block titleblock %}Contacts{% endblock titleblock %}


{% block bodyblock %}
<div class="page-top-btns">
    <a class="btn" href="{% url 'contacts:contacts_create' %}">Add New Contact</a>
</div>

<div class="list-search-filter">
    <select name="query-select" id="query-select" class="query-select" onChange=selectCallLink()>
        <option value="{% url 'contacts:contacts_list' 'first' %}">First Name</option>
        <option value="{% url 'contacts:contacts_list' 'last' %}">Last Name</option>
      </select>


    <form method="GET">
      {{search_form.search_field}}
  
      <input class="btn btn-sm" type="submit" value="Search">
  
    </form>
  </div>
  
  <div class="message-card">
    {% if results %}
      <h2>{{contacts_list|length}} results for "{{ results }}".</h2>
    {% endif %}
  </div>


    {% if contacts_list %}
        {% for contact in contacts_list %}

        <a class="card" href="{% url 'contacts:contacts_detail' contact.pk %}">
            
                <h2 class="card-heading">{{contact}}</h2>
            <div class="main-info-wrapper">
                <p class="card-subheading">{{contact.company}} &middot; {{contact.title}}</p>
                
                <div class="main-info">
                    {% if contact.phone_number %}
                        <p>p: {{contact.phone_format}}</p>  
                    {% endif %}

                    {% if contact.email %}
                        <p>e: {{contact.email}}</p>    
                    {% endif %}
                        
                </div>

            </div>
        </a>

        {% endfor %}
    {% else %}
        {% if not results %}
          
            <div class="message-card">
                <h1 class="contact-message">No contacts to show.</h1>
            </div>
        {% endif %}

    {% endif %}
    

{% endblock bodyblock %}